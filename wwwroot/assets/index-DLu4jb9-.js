import{r as s,b as y,j as e,t as c}from"./index-BM71IHYH.js";import{L as N}from"./logo-BIfEBSO-.js";import{w as E}from"./AtSign-C5idZA0X.js";import{g as w,S as R}from"./SendVerificationLink-WQ8Z2jfc.js";import{k as b}from"./Key-DbvB58lg.js";import{F as m}from"./FormInputField-Xka4Ls7u.js";import{B as d}from"./Button-DjVsqX09.js";import{g as A}from"./utils-Dhn_WXxr.js";import{h as S,b as I,s as L}from"./auth.api-BD3ZayB1.js";import"./IconoirContext-DnFuTd40.js";function H(){const[x,f]=s.useState(""),[r,o]=s.useState(!1),[i,p]=s.useState(!1),u=y();async function g(n){n.preventDefault();const l=new FormData(n.currentTarget),t=l.get("email"),h=l.get("password");f(t);try{o(!0),await I(t,h),await u({to:"/dashboard"})}catch(j){o(!1);const a=A(j);a?.status===403?(await L(t),p(!0)):a?.status===401?c("Invalid email or password"):a?.status===423&&c("Too many failed sign in attempts, try again later")}}return e.jsxs("main",{className:"flex flex-col gap-y-6 justify-center items-center min-h-screen py-2 px-2",children:[e.jsx("a",{href:"/",children:e.jsx("img",{src:N,alt:"logo"})}),e.jsxs("div",{className:"flex flex-col items-center gap-y-2 text-center",children:[e.jsx("h1",{className:"font-primary text-4xl font-bold text-white",children:"QUESTLOG"}),e.jsx("p",{className:"font-secondary text-sm text-primary-green font-medium",children:"[ RESUME YOUR ADVENTURE ]"})]}),!i&&e.jsxs(s.Fragment,{children:[e.jsxs("form",{onSubmit:g,className:"form",children:[e.jsx(m,{id:"email",type:"email",name:"email",label:"ADVENTURER ID (EMAIL)",icon:e.jsx(E,{color:"gray"}),placeholder:"hero@realm.com",required:!0}),e.jsxs("div",{className:"flex flex-col items-stretch gap-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center font-primary text-xs",children:[e.jsx("label",{htmlFor:"password",className:"text-primary-green",children:"SECRET PASSPHRASE"}),e.jsx("a",{href:"/auth/forgot-password",className:"text-[#9CA3AF]",children:"Lost Key?"})]}),e.jsx(m,{id:"password",type:"password",name:"password",icon:e.jsx(b,{color:"gray"}),placeholder:"*********",required:!0})]}),e.jsx(d,{type:"submit",variant:"filled",className:"py-3",disabled:r,children:"CONTINUE ADVENTURE"}),e.jsx("span",{className:"text-gray-400 text-center",children:"- OR -"}),e.jsx(d,{type:"button",variant:"outline",className:"py-3",onClick:S,disabled:r,children:e.jsxs("div",{className:"flex gap-x-2 justify-center items-center",children:[e.jsx(w,{}),"Continue with Google"]})})]}),e.jsxs("p",{className:"text-gray-400",children:["New Player?",e.jsx("a",{href:"/auth/register",className:"text-primary-green font-bold ",children:" CREATE CHARACTER"})]})]}),i&&e.jsx(R,{email:x,sendOnMount:!1})]})}export{H as component};
